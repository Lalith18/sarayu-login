(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{12:function(e,t,r){e.exports={auth:"ForgotPasswordPage_auth__1DarY",control:"ForgotPasswordPage_control__rJpb2",actions:"ForgotPasswordPage_actions__36Wpc",toggle:"ForgotPasswordPage_toggle__12Y-W"}},13:function(e,t,r){e.exports={form:"ProfileForm_form__2S2s5",control:"ProfileForm_control__2IFl3",action:"ProfileForm_action__7qsDF"}},16:function(e,t,r){e.exports={header:"MainNavigation_header__FAsiT",logo:"MainNavigation_logo__iruwi"}},21:function(e,t,r){e.exports={home:"Homepage_home__37Nvp"}},26:function(e,t,r){},36:function(e,t,r){"use strict";r.r(t);var s=r(19),n=r.n(s),o=r(7),c=(r(26),r(8)),a=r(1),i=r(2),l=r(16),j=r.n(l),u=r(0),d=function(e){var t=e.user,r=e.setUser;return Object(u.jsxs)("header",{className:j.a.header,children:[Object(u.jsx)("div",{className:j.a.logo,children:"SARAYU"}),Object(u.jsx)("div",{children:t&&Object(u.jsx)(o.b,{to:"/",children:Object(u.jsx)("button",{onClick:function(){return r()},children:"Logout"})})})]})},h=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(d,{user:e.user,setUser:e.setUser}),Object(u.jsx)("main",{children:e.children})]})},b=r(9),m=r.n(b),O=function(e){var t=e.setUser,r=Object(a.useRef)(),s=Object(a.useRef)(),n=Object(a.useRef)(),l=Object(a.useRef)(),j=Object(a.useRef)(),d=Object(a.useState)(!0),h=Object(c.a)(d,2),b=h[0],O=h[1],p=Object(a.useState)(!1),f=Object(c.a)(p,2),x=f[0],g=f[1],_=Object(a.useState)(!1),w=Object(c.a)(_,2),v=w[0],N=w[1],y=function(){O((function(e){return!e}))};return v?Object(u.jsx)(i.a,{to:"/home"}):Object(u.jsxs)("section",{className:m.a.auth,children:[Object(u.jsx)("h1",{children:b?"Login":"Sign Up"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var o,c,a=n.current.value,i=l.current.value;if(g(!0),b)o="https://lit-eyrie-58493.herokuapp.com/api/auth/login",c={email:a,password:i};else{var u=r.current.value,d=s.current.value;if(j.current.value!==i)return g(!1),void alert("Passwords dont match");o="https://lit-eyrie-58493.herokuapp.com/api/auth/register",c={user_type:"client",email:a,password:i,first_name:u,last_name:d}}fetch(o,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}).then((function(e){return g(!1),e.ok?e.json():e.json().then((function(e){var t="Authentication failed!",r=e.errors;throw e&&e.errors&&(t=r[0].message),new Error(t)}))})).then((function(e){t(e),N(!0)})).catch((function(e){alert(e.message)}))},children:[!b&&Object(u.jsxs)("div",{className:m.a.control,children:[Object(u.jsx)("label",{htmlFor:"first-name",children:"First Name"}),Object(u.jsx)("input",{type:"first-name",id:"first-name",required:!0,ref:r})]}),!b&&Object(u.jsxs)("div",{className:m.a.control,children:[Object(u.jsx)("label",{htmlFor:"last-name",children:"Last Name"}),Object(u.jsx)("input",{type:"last-name",id:"last-name",required:!0,ref:s})]}),Object(u.jsxs)("div",{className:m.a.control,children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email"}),Object(u.jsx)("input",{type:"email",id:"email",required:!0,ref:n})]}),Object(u.jsxs)("div",{className:m.a.control,children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",id:"password",required:!0,ref:l})]}),!b&&Object(u.jsxs)("div",{className:m.a.control,children:[Object(u.jsx)("label",{htmlFor:"confirm-password",children:"Confirm Password"}),Object(u.jsx)("input",{type:"password",id:"confirm-password",required:!0,ref:j})]}),Object(u.jsxs)("div",{className:m.a.actions,children:[!x&&Object(u.jsx)("button",{children:b?"Login":"Create Account"}),x&&Object(u.jsx)("p",{children:"Loading..."}),Object(u.jsx)("button",{type:"button",className:m.a.toggle,onClick:y,children:b?"Create new account":"Login with existing account"}),Object(u.jsx)(o.b,{to:"forgot-password",children:Object(u.jsx)("button",{type:"button",className:m.a.toggle,onClick:y,children:"Forgot Password?"})})]})]})]})},p=function(e){var t=e.setUser;return Object(u.jsx)(O,{setUser:t})},f=r(12),x=r.n(f),g=function(){var e=Object(a.useRef)(),t=Object(a.useState)(!1),r=Object(c.a)(t,2),s=r[0],n=r[1],i=function(t){t.preventDefault(),console.log("called");var r,s=e.current.value;n(!0),r={email:s},fetch("https://lit-eyrie-58493.herokuapp.com/api/auth/password_reset",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){return n(!1),e.ok?e.json():e.json().then((function(e){var t="Authentication failed!",r=e.errors;throw e&&e.errors&&(t=r[0].message),new Error(t)}))})).then((function(e){return alert(e.message)})).catch((function(e){alert(e.message)}))};return Object(u.jsxs)("section",{className:x.a.auth,children:[Object(u.jsx)("h1",{children:"Forgot Password"}),Object(u.jsxs)("form",{onSubmit:i,children:[Object(u.jsxs)("div",{className:x.a.control,children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email"}),Object(u.jsx)("input",{type:"email",id:"email",required:!0,ref:e})]}),Object(u.jsxs)("div",{className:x.a.actions,children:[!s&&Object(u.jsx)(o.b,{to:"/",children:Object(u.jsx)("button",{onClick:i,children:"Submit"})}),s&&Object(u.jsx)("p",{children:"Loading..."})]})]})]})},_=r(21),w=r.n(_),v=r(13),N=r.n(v),y=function(e){var t=e.user,r=Object(a.useRef)(),s=Object(a.useRef)(),n=Object(a.useState)(!1),o=Object(c.a)(n,2),i=o[0],l=o[1];return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n,o=r.current.value,c=s.current.value;l(!0),n={current_password:o,new_password:c},fetch("https://lit-eyrie-58493.herokuapp.com/api/auth/password_change",{method:"POST",body:JSON.stringify(n),headers:{Authorization:"Bearer "+t.auth_token,"Content-Type":"application/json"}}).then((function(e){if(l(!1),!e.ok)return e.json().then((function(e){var t;console.log(e);var r=e.errors;throw alert(r[0].message),t=r[0].message,new Error(t)}));alert("Password changed")})).catch((function(e){console.log(e.message)}))},className:N.a.form,children:[Object(u.jsxs)("div",{className:N.a.control,children:[Object(u.jsx)("label",{htmlFor:"password",children:"Current Password"}),Object(u.jsx)("input",{type:"password",id:"password",required:!0,ref:r}),Object(u.jsx)("label",{htmlFor:"new-password",children:"New Password"}),Object(u.jsx)("input",{type:"password",id:"new-password",required:!0,ref:s})]}),Object(u.jsxs)("div",{className:N.a.action,children:[!i&&Object(u.jsx)("button",{children:"Change Password"}),i&&Object(u.jsx)("p",{children:"Loading..."})]})]})},F=function(e){var t=e.user;return t?Object(u.jsxs)("section",{className:w.a.home,children:[Object(u.jsxs)("h1",{children:["Welcome ",t.first_name," ",t.last_name]}),Object(u.jsx)(y,{user:t})]}):Object(u.jsx)(i.a,{to:"/"})},P=function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),r=t[0],s=t[1];return Object(u.jsx)(h,{user:r,setUser:s,children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/",exact:!0,children:Object(u.jsx)(p,{setUser:s})}),Object(u.jsx)(i.b,{path:"/home",children:Object(u.jsx)(F,{user:r})}),Object(u.jsx)(i.b,{path:"/forgot-password",component:g})]})})};n.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(P,{})}),document.getElementById("root"))},9:function(e,t,r){e.exports={auth:"AuthForm_auth__lk1sQ",control:"AuthForm_control__1-5Nd",actions:"AuthForm_actions__3shPW",toggle:"AuthForm_toggle__3weej"}}},[[36,1,2]]]);
//# sourceMappingURL=main.62e9149f.chunk.js.map